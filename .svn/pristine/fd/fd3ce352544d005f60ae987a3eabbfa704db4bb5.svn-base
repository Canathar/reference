╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║ SDP_Flow_Demistified.txt                                                                                                                                                ║
║                                                                                                                                                                         ║
║ Document Best Viewed/Printed: Page{Ledger, Landscape, 0.25in Side Margins}   Font{Monospace Font, Normal, 10pt}                                                         ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                            Revision History                                                                             ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║ VV.vv.DOYyy.bb (dd MMM yy) - Initial Creation/Development Update/Maintenance Update                                                                                     ║
║                                                                                                                                                                         ║
║  1.00.29517.xx (22 Oct 17) - Initial Creation {J. Laccone}                                                                                                              ║
║                                 Added header, added reference data                                                                                                      ║
║  1.01.29617.xx (23 Oct 17) - Development Update {J. Laccone}                                                                                                            ║
║                                 Added clarification to several steps                                                                                                    ║
║  1.02.08218.xx (23 Mar 18) - Development Update {J. Laccone}                                                                                                            ║
║                                 Additional clarification                                                                                                                ║
║  1.03.08518.xx (26 Mar 18) - Development Update {J. Laccone}                                                                                                            ║
║                                 Modified code flow                                                                                                                      ║
║  1.04.13818.xx (18 May 18) - Development Update {J. Laccone}                                                                                                            ║
║                                 Updated Outgoing/Incoming Call diagrams                                                                                                 ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                Reference                                                                                ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                                                                         ║
║   ION Repository                                                                                                                                                        ║
║   --------------                                                                                                                                                        ║
║      https://lnsvr0011/repositories/ion/                                                                                                                                ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                  Notes                                                                                  ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                                                                         ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝


╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                     Common Code Path For Any Calls                                                                      ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
When SDPHandler is constructed, the builder pointer is initialized to one of the following:

   builder = SDPBuilder   (Base Class)
   builder = SDPAGBuilder (For AG Calls)
   builder = SDPGGBuilder (For GG Calls)

   builder->setAudioStreamInfo ***** Base Class Function Implemented In SDPBuilder.h *****


   sipSessionsvc = m5t::ISipSessionSvc


   pCallHandler = CallHandler

   sdpHandler = SDPHandler


╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                                                                                                                         ║
║                                                    Code Path To Create SDP For Invite Request - UAC (Outbound Call)                                                     ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                                                                         ║
║   Reference                                                                                                                                                             ║
║   ─────────                                                                                                                                                             ║
║      https://www.ietf.org/proceedings/51/I-D/draft-ietf-sip-call-flows-05.txt                                                                                           ║
║      https://www.rfc-editor.org/rfc/rfc3665.txt                                                                                                                         ║
║      https://tools.ietf.org/html/rfc6337                                                                                                                                ║
║                                                                                                                                                                         ║
║                                                                                                                                                                         ║
║                        Sequence Diagram (all messages shown as coming from device, not proxy)                                                                           ║
║                     ────────────────────────────────────────────────────────────────────────────                                                                        ║
║                                                                                                                                                                         ║
║    This Codebase                                   Remote Device                                                                                                        ║
║                                                                                                                                                                         ║
║         UAC                                             UAS                                                                                                             ║
║         ─┬─                                             ─┬─                                                                                                             ║
║          │                                               │          UAC Sends INVITE Request                    Function That Initiates Request / Handles Response      ║
║          │                                               │          ────────────────────────                    ──────────────────────────────────────────────────      ║
║          │  [CSeq 1]  INVITE Request (w SDP Body)        │                                                         OutgoingCallState::start                             ║
║       F1 ├──────────────────────────────────────────────>│ G1                                                         SDPHandler::generateSDPOffer                      ║
║          │ voice media format(s): 0 8 15 18 (can be all) │                                                               SDPBuilder::generateSDPPacketFromLocalCap      ║
║          │                       ptime: xx               │                                                                                                              ║
║          │                                               │                                                                                                              ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   Provisional Responses to INVITE Request     Function That Initiates Request / Handles Response      ║
║   │      │                                               │      │   ───────────────────────────────────────     ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]       100 Response                  │      │      100 - Optional Response Message To          OutgoingCallState::EvProgress                        ║
║   │ F2-1 │<──────────────────────────────────────────────┤ G2-1 │            Indicate The Call Is Trying                                                                ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │      180 - Optional Response Message To                                                               ║
║   │      │                                               │      │            Indicate The Call Is Ringing                                                               ║
║   │      │  [CSeq 1]       18x Response                  │      │                                                                                                       ║
║   │ F2-2 │<──────────────────────────────────────────────┤ G2-2 │      183 - Optional Response Message To                                                               ║
║   │      │                                               │      │            Indicate Additional Information                                                            ║
║   │      │   (Only One Path Is Taken, Either F3 or X1)   │      │                                                                                                       ║
║   └──────┼───────────────────────────────────────────────┼──────┘                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   UAC Ends the Call With a CANCEL Request     Function That Initiates Request / Handles Response      ║
║   │      │                                               │      │   ───────────────────────────────────────     ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]      CANCEL Request                 │      │                                                  OutgoingCallState::cancel                            ║
║   │   X1 ├──────────────────────────────────────────────>│ Y1   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       200 Response                  │      │                                                                                                       ║
║   │   X2 │<──────────────────────────────────────────────┤ Y2   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       487 Response                  │      │                                                                                                       ║
║   │   X3 │<──────────────────────────────────────────────┤ Y1   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │   X4 ├──────────────────────────────────────────────>│ Y2   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │               (Call Ends Here)                │      │                                                                                                       ║
║   ╘══════╪═══════════════════════════════════════════════╪══════╛                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   Responses to INVITE Request                 Function That Initiates Request / Handles Response      ║
║   │      │                                               │      │   ───────────────────────────                 ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1] 200 Response (w SDP Body)           │      │      200 - Response Message To Indicate          OutgoingCallState::EvSuccess                         ║
║   │ F3-1 │<──────────────────────────────────────────────┤ G3-1 │            Request Was Successful (OK)*             SDPHandler::translateSDPOffer                     ║
║   │      │ voice media format(s): 0 8 15 18 (can be all) │      │                                                                                                       ║
║   │      │                       ptime: xx               │      │      3xx - Optional Response Message To          OutgoingCallState::EvRedirected                      ║
║   │      │                                               │      │            Indicate Redirection Of The Call                                                           ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       3xx Response                  │      │      4xx - Optional Response Message To          OutgoingCallState::EvFailure                         ║
║   │ F3-2 │<──────────────────────────────────────────────┤ G3-2 │            Indicate Client Failure (UAC)                                                              ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │      5xx - Optional Response Message To          OutgoingCallState::EvFailure                         ║
║   │      │                                               │      │            Indicate Server Failure (UAS)                                                              ║
║   │      │  [CSeq 1]       4xx Response                  │      │                                                                                                       ║
║   │ F3-3 │<──────────────────────────────────────────────┤ G3-3 │      6xx - Optional Response Message To          OutgoingCallState::EvFailure                         ║
║   │      │                                               │      │            Indicate Global Failure                                                                    ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       5xx Response                  │      │      *   If 2xx response is received, MUST send the ACK request                                       ║
║   │ F3-4 │<──────────────────────────────────────────────┤ G3-4 │                                                                                                       ║
║   │      │                                               │      │      **  Establishment and direction of RTP media depends on SDP parameters matching                  ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       6xx Response                  │      │                                                                                                       ║
║   │ F3-5 │<──────────────────────────────────────────────┤ G3-5 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │   F4 ├──────────────────────────────────────────────>│ G4   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  (Bi-)Directional RTP (MAY Be) Established**  │      │                                                                                                       ║
║   │      │<=============================================>│      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │   (Only One Path Is Taken, Either R1 or F5)   │      │                                                                                                       ║
║   └──────┼───────────────────────────────────────────────┼──────┘                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   UAC Sends Re-INVITE Request                 Function That Initiates Request / Handles Response      ║
║   │      │                                               │      │   ───────────────────────────                 ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]  INVITE Request (w SDP Body)        │      │                                                  CallHandler::sendReInvite                            ║
║   │   R1 ├──────────────────────────────────────────────>│ S1   │                                                     SDPHandler::generateSDPOffer                      ║
║   │      │  voice media format(s): 0 8 15 18 (only one)  │      │                                                        SDPBuilder::generateSDPPacketFromNegotiation   ║
║   │      │                       ptime: xx               │      │                                                                                                       ║
║   │      │                                               │      │   Responses to INVITE Request                 Function That Initiates Request / Handles Response      ║
║   │      │                                               │      │   ───────────────────────────                 ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1] 200 Response (w SDP Body)           │      │      200 - Response Message To Indicate                                                               ║
║   │   R2 │<──────────────────────────────────────────────┤ S2   │            Request Was Successful (OK)*                                                               ║
║   │      │  voice media format(s): 0 8 15 18 (only one)  │      │                                                                                                       ║
║   │      │                       ptime: xx               │      │                                                                                                       ║
║   │      │                                               │      │      *  If 2xx response is received, MUST send the ACK request                                        ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │   R3 ├──────────────────────────────────────────────>│ S3   │      ** Establishment and direction of RTP media depends on SDP parameters matching                   ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  (Bi-)Directional RTP (MAY Be) Established**  │      │                                                                                                       ║
║   │      │<=============================================>│      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   └──────┼───────────────────────────────────────────────┼──────┘                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   UAC Ends the Call With a BYE Request        Function That Initiates Request / Handles Response      ║
║   │      │                                               │      │   ────────────────────────────────────        ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]        BYE Request                  │      │                                                                                                       ║
║   │   F5 ├──────────────────────────────────────────────>│ G5   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       200 Response                  │      │                                                                                                       ║
║   │ F6-1 │<──────────────────────────────────────────────┤ G6-1 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       4xx Response                  │      │                                                                                                       ║
║   │ F6-2 │<──────────────────────────────────────────────┤ G6-2 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │ F6-3 ├──────────────────────────────────────────────>│ G6-3 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │               (Call Ends Here)                │      │                                                                                                       ║
║   ╘══════╪═══════════════════════════════════════════════╪══════╛                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   Override Call Types, UAC Sends INFO Request Function That Initiates Request / Handles Response      ║
║   │      │                                               │      │   ─────────────────────────────────────────── ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]       INFO Request                  │      │                                                                                                       ║
║   │   I1 ├──────────────────────────────────────────────>│ J1   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       200 Response                  │      │                                                                                                       ║
║   │ I2-1 │<──────────────────────────────────────────────┤ J2-1 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       4xx Response                  │      │                                                                                                       ║
║   │ I2-2 │<──────────────────────────────────────────────┤ J2-2 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │ I3-3 ├──────────────────────────────────────────────>│ J2-3 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   ╘══════╪═══════════════════════════════════════════════╪══════╛                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   UAS Ends the Call With a BYE Request        Function That Initiates Request / Handles Response      ║
║   │      │                                               │      │   ────────────────────────────────────        ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]        BYE Request                  │      │                                                                                                       ║
║   │   F7 │<──────────────────────────────────────────────┤ G7   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       200 Response                  │      │                                                                                                       ║
║   │   F8 ├──────────────────────────────────────────────>│ G8   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │               (Call Ends Here)                │      │                                                                                                       ║
║   ╘══════╪═══════════════════════════════════════════════╪══════╛                                                                                                       ║
║          │                                               │                                                                                                              ║
║                                                                                                                                                                         ║
║                                                                                                                                                                         ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

OutgoingCallState::start
──┬─────────────────────
  │
  │
  ├── SDPHandler::generateSDPOffer
  │   ──┬─────────────────────────
  │     │
  │     │
  │     ├── builder->generateSDPPacketFromLocalCap <<<<< Virtual Function, Not Currently Overridden >>>>>
  │     │   ──┬───────────────────────────────────
  │     │     │
  │     │     │
  │     │     ├── SDPBuilder::setupCallInformation
  │     │     │
  │     │     │
  │     │     ├── builder->setupCapabilities <<<<< Virtual Function, Not Currently Overridden >>>>>
  │     │     │   ──┬───────────────────────
  │     │     │     │
  │     │     │     │
  │     │     │     ├── SDPBuilder::setupAudioStreamLocalInfo
  │     │     │     │
  │     │     │     │
  │     │     │     ├── builder->setupLocalSdpCapSessionAttributes <<<<< Virtual Function, Not Currently Overridden >>>>>
  │     │     │     │   ──┬───────────────────────────────────────
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── SDPHelper::createProtocolVersion
  │     │     │     │     │   ──┬─────────────────────────────
  │     │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- if -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::SetProtocolVersion =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── SDPHelper::createOrigin
  │     │     │     │     │   ──┬────────────────────
  │     │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- if -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::SetOrigin =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── ===== m5t::CSdpFieldSessionName::SetSessionName =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── ===== m5t::CSdpFieldSessionName::Validate =====
  │     │     │     │     │   ──┬────────────────────────────────────────────
  │     │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- if -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::SetSessionName =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── SDPHelper::createConnectionData
  │     │     │     │     │   ──┬────────────────────────────
  │     │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- if -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::SetConnectionData =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── ----- if ----- ===== m5t::CSdpLevelSession::SetInformation =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── ----- if ----- SDPHelper::createOtherAttribute << callerHasIncVM >>
  │     │     │     │     │   ──┬───────────────────────────────────────────
  │     │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- if -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::AddOtherAttribute =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── ----- if ----- SDPHelper::createOtherAttribute << AgggCplConf >>
  │     │     │     │     │   ──┬───────────────────────────────────────────
  │     │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- if -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::AddOtherAttribute =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     ├── ----- switch ----- SL_ATC_IP_StreamInfo::sendReceiveMode
  │     │     │     │     │   ──┬─────────────────────────────────────────────────────
  │     │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- case -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::SetSendOnly =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- case -----
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::SetRecvOnly =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- case -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::SetSendRecv =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     │     ----- case -----
  │     │     │     │     │
  │     │     │     │     │     │
  │     │     │     │     │     └── ===== m5t::CSdpLevelSession::SetInactive =====
  │     │     │     │     │
  │     │     │     │     │
  │     │     │     │     └── ===== m5t::CSdpLevelSession::Serialize =====
  │     │     │     │
  │     │     │     │
  │     │     │     └── builder->setupMediaAttributes <<<<< Virtual Function, Overridden By AG / GG >>>>>
  │     │     │         ──┬──────────────────────────
  │     │     │           │
  │     │     │           │   ┌────────────────────────────────────────────────────────────────────────────────────────────────┐
  │     │     │           │   │  Both Overridden Functions Call The Same Base Class Function Before Any Additional Processing  │
  │     │     │           │   └────────────────────────────────────────────────────────────────────────────────────────────────┘
  │     │     │           │
  │     │     │           ├── SDPBuilder::setupAudioMediaCommonAttributes
  │     │     │           │   ──┬────────────────────────────────────────
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPBuilder::determineCommunicationDomainForCodecs
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPHelper::getMediaFormatFromCodecInfo
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPHelper::getPtimeValue
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPHelper::createMediaAnnouncement
  │     │     │           │     │   ──┬───────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldMediaAnnouncement::SetMediaTypeId =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldMediaAnnouncement::SetMediaTypeString =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldMediaAnnouncement::SetTransportProtocolId =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldMediaAnnouncement::SetTransportProtocolString =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldMediaAnnouncement::SetTransportPort =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldMediaAnnouncement::AddMediaFormat =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpFieldMediaAnnouncement::Validate =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::SetMediaAnnouncement =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPHelper::createRtpmapAttribute
  │     │     │           │     │   ──┬─────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeRtpmap::SetPayloadType =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeRtpmap::SetClockRate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeRtpmap::SetEncodingName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── SDPHelper::getEncodingNameFromPayloadType
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpFieldAttributeRtpmap::Validate =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::AddRtpmap =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPHelper::createPtimeAttribute
  │     │     │           │     │   ──┬─────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributePtime::SetPacketTime =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpFieldAttributeRtpmap::Validate =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::SetPtime =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPHelper::createOtherAttribute << Two Parameter Function >>
  │     │     │           │     │   ──┬────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << maxptime >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::SetSendOnly =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::SetRecvOnly =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::SetSendRecv =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::SetInactive =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPBuilder::setSingularOrMDAttribute
  │     │     │           │     │   ──┬─────────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── SDPHelper::createOtherAttribute << One Parameter Function >>
  │     │     │           │     │     │   ──┬────────────────────────────
  │     │     │           │     │     │     │
  │     │     │           │     │     │     │
  │     │     │           │     │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │     │
  │     │     │           │     │     │     │
  │     │     │           │     │     │     └── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << multcalling / singcalling >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::SetSession =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     └── ===== m5t::CSdpLevelMedia::Validate =====
  │     │     │           │
  │     │     │
  │     │     │      ┌──────────────────────────────────────────────────────────────────────────────────┐
  │     │     │      │  For AG, Additional Code Handled In Override SDPAGBuilder::setupMediaAttributes  │
  │     │     │      └──────────────────────────────────────────────────────────────────────────────────┘
  │     │     │
  │     │     │           ├── SDPAGBuilder::setupMediaAGAttributes
  │     │     │           │   ──┬─────────────────────────────────
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::addR2SVocoder
  │     │     │           │     │   ──┬────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeRtpmap::SetPayloadType =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeRtpmap::SetClockRate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeRtpmap::SetEncodingName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpLevelMedia::AddRtpmap =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpFieldMediaAnnouncement::AddMediaFormat =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setPttRep
  │     │     │           │     │   ──┬────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << ptt_rep >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setVCSCallType
  │     │     │           │     │   ──┬─────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── SDPHelper::vcsStringFromCallType
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << type >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setBSS
  │     │     │           │     │   ──┬─────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── SDPHelper::generateBSSstring
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << bss >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setR2SKeepAlivePeriod
  │     │     │           │     │   ──┬────────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << R2S-KeepAlivePeriod >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setR2SKeepAliveMultiplier
  │     │     │           │     │   ──┬────────────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << R2S-KeepAliveMultiplier >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setRTPHeaderVersion
  │     │     │           │     │   ──┬──────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << rtphe >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setTxRxMode
  │     │     │           │     │   ──┬──────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << txrxmode >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setFrequencyID
  │     │     │           │     │   ──┬─────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << fid >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setCcplCapability
  │     │     │           │     │   ──┬────────────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << ccpl >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setRemoteAVN
  │     │     │           │     │   ──┬───────────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << remoteAVN >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPAGBuilder::setPttID
  │     │     │           │     │   ──┬───────────────────
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     ├── ===== m5t::CSdpFieldAttributeOther::Validate =====
  │     │     │           │     │     │
  │     │     │           │     │     │
  │     │     │           │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << ptt-id >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::SetSession =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     └── ===== m5t::CSdpLevelMedia::Validate =====
  │     │     │           │
  │     │     │           │
  │     │     │           └── ===== m5t::CSdpCapabilitiesMgr::AddStream ===== << localSdpCap >>
  │     │     │
  │     │     │
  │     │     │      ┌──────────────────────────────────────────────────────────────────────────────────┐
  │     │     │      │  For GG, Additional Code Handled In Override SDPGGBuilder::setupMediaAttributes  │
  │     │     │      └──────────────────────────────────────────────────────────────────────────────────┘
  │     │     │
  │     │     │           ├── SDPGGBuilder::setupMediaGGAttributes
  │     │     │           │   ──┬─────────────────────────────────
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << service >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPHelper::generateSpaceSeparatedString
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << sid >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── SDPHelper::generateSpaceSeparatedString
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << epid >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << Restrict >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << DigitCount >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << resetDigit >>
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetName =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     ├── ===== m5t::CSdpFieldAttributeOther::SetValue =====
  │     │     │           │     │
  │     │     │           │     │
  │     │     │           │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute ===== << continousDialing >>
  │     │     │           │
  │     │     │           │
  │     │     │           ├── ===== m5t::CSdpLevelMedia::SetSession =====
  │     │     │           │
  │     │     │           │
  │     │     │           ├── ===== m5t::CSdpCapabilitiesMgr::AddStream ===== << localSdpCap >>
  │     │     │           │
  │     │     │           │
  │     │     │           └── SDPGGBuilder::setupTelephoneEventStream
  │     │     │               ──┬────────────────────────────────────
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── SDPGGBuilder::setTelephoneEventStreamDirection
  │     │     │                 │   ──┬───────────────────────────────────────────
  │     │     │                 │     │
  │     │     │                 │     │
  │     │     │                 │     ├── ===== m5t::CSdpLevelMedia::SetSendOnly =====
  │     │     │                 │     │
  │     │     │                 │     │
  │     │     │                 │     ├── ===== m5t::CSdpLevelMedia::SetRecvOnly =====
  │     │     │                 │     │
  │     │     │                 │     │
  │     │     │                 │     └── ===== m5t::CSdpLevelMedia::SetSendRecv =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpFieldMediaAnnouncement::SetMediaTypeId =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpFieldMediaAnnouncement::SetMediaTypeString =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpFieldMediaAnnouncement::SetTransportPort =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpFieldMediaAnnouncement::SetTransportProtocolId =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpFieldMediaAnnouncement::SetTransportProtocolString =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpFieldMediaAnnouncement::Validate =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpFieldAttributePtime::SetPacketTime =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpLevelMedia::SetPtime =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpLevelMedia::SetMediaAnnouncement =====
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpCapabilitiesMgr::AddStream ===== << localSdpCap / Second Media Description >>
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpCapabilitiesMgr::AddPayloadType ===== << localSdpCap / Second Media Description / Telephone Event >>
  │     │     │                 │
  │     │     │                 │
  │     │     │                 ├── ===== m5t::CSdpFmtpTelEvent::SetTelEventSupport ===== << DTMFTones / tone206 / tone 207 / toneWait / tonePause >>
  │     │     │                 │
  │     │     │                 │
  │     │     │                 └── ===== m5t::CSdpCapabilitiesMgr::ReplaceFmtpTelEvent ===== << localSdpCap / Second Media Description >>
  │     │     │
  │     │     │
  │     │     └── ===== m5t::CSdpCapabilitiesMgr::CreateSdpPacket ===== << localSdpCap >>
  │     │
  │     │
  │     └── ===== m5t::CSdpPacket::Serialize =====
  │
  │
  └── ===== m5t::CSipMessageBody::AddBody ===== << bodySdp >>



╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                                                                                                                         ║
║                                            Code Path To Create SDP For 200 OK Response To Invite Request - UAC (Outbound Call)                                          ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                                                                         ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

OutgoingCallState::EvSuccess
──┬─────────────────────────
  │
  │
  ├── ATCoIP::SipUA::addWg67VersionHeaderTo
  │
  │
  ├── sipSessionsvc->Ack
  │
  │
  ├── ----- if ----- << Result of Ack was failure >>
  │   ──┬───────────
  │     │
  │     │
  │     ├── pCallHandler->hangupWithBye
  │     │
  │     │
  │     └── return
  │
  │
  ├── ----- if ----- ===== m5t::CSipPacket::GetHeaderList().Get() ===== << To Header >>
  │   ──┬──────────────────────────────────────────────────────────────
        │
        │
        └── << Configure call handler based on SIP parameters >>

  │
  ├── ----- else -----
  │   ──┬─────────────
        │
        │
        ├── pCallHandler->hangupWithBye
        │
        │
        └── return

  │
  ├── ===== m5t::CSipPacket::GetPayload =====
  │
  │
  ├── ----- if ----- !pCallHandler->sdpHandler->translateSDPOffer << logic also checkes for null SDP and whether or not we are trying to hangup the call >>
  │   ──┬────────────────────────────────────────────────────────
        │
        │
        └── pCallHandler->hangupWithBye

  │
  ├── ----- else if ----- OutgoingCalLState::isFork
  │   ──┬──────────────────────────────────────────
        │
        │
        ├── ----- if ----- << Test for specific call types >>
        │   ──┬───────────
              │
              │
              └── pCallHandler->hangupWithBye

        │
        ├── ----- else -----
        │   ──┬─────────────
              │
              │
              └── pCallHandler->sendReInvite

  │
  ├── ----- else -----
  │   ──┬─────────────
        │
        │
        ├── ----- if ----- pCallHandler->getSDPHandler()->getBuilder()->getNeedReInvite()
        │   ──┬──────────────────────────────────────────────────────────────────────────
              │
              │
              └── pCallHandler->sendReInvite

        │
        ├── ----- else -----
        │   ──┬─────────────
              │
              │
              └── pCallHandler->stateTransit << EstablishedCallState >>

 │
 └── sipSessionsvc->ReleaseIfRef



╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                                                                                                                         ║
║                                                                       SDPBuilder Code Path For SDP "Negotiation"                                                        ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                                                                         ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

SDPBuilder::determineCommunicationDomainForCodecs
──┬──────────────────────────────────────────────
  │
  │
  ├── ----- if ----- !std::string.empty() << localDomain >>
  │    ──┬────────────────────────────────────────
         │
         │
         └── ATCoIP::SipUA::instance().getFIVCASupportedCodecs

  │
  └── ----- else -----
       ──┬────────────
         │
         │
         └── ATCoIP::SipUA::instance().getFEVCASupportedCodecs

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------














╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                                                                                                                         ║
║                                                                       SDPHandler Code Path For SDP "Negotiation"                                                        ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                                                                         ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

SDPHandler::generateSDPAnswer
──┬──────────────────────────
  │
  │
  ├── MX_ASSERT builder << NULL check, this code will core the device if there is no active SDPBuilder >>
  │
  │
  ├── ----- if ----- !builder->UpdateRemoteSDPCap
  │   ──┬────────────────────────────────────────
  │     │
  │     │
  │     └── return false
  │
  │
  ├── ----- if ----- !builder->setupCallInformation
  │   ──┬──────────────────────────────────────────
  │     │
  │     │
  │     └── return false
  │
  │
  ├── ----- if ----- !builder->setupCapabilities
  │   ──┬───────────────────────────────────────
  │     │
  │     │
  │     └── return false
  │
  │
  ├── ----- if ----- !builder->generateAnswer
  │   ──┬────────────────────────────────────
  │     │
  │     │
  │     └── return false
  │
  │
  ├── builder->updateAudioStreamRemoteInfo
  │
  │
  ├── builder->retrieveRemoteOVRSids
  │
  │
  ├── ----- if ----- ===== m5t::CSdpCapabilitiesMgr::GetFirstSupportedStream =====
  │   ──┬─────────────────────────────────────────────────────────────────────────
        │
        │
        ├── ===== m5t::CSdpCapabilitiesMgr::GetSdpSession()->SetOrigin(builder->getLocalSdpCap().GetSdpSession()->GetOrigin()) ===== << answer >>
        │
        │
        ├── builder->setLocalSdpCap
        │
        │
        ├── ===== m5t::CSdpCapabilitiesMgr::GetStream ===== << answer >>
        │
        │
        └── SDPHelper::updateMediaSendReceiveMode

  │
  ├── ----- else -----
  │   ──┬─────────────
        │
        │
        ├── << log error that the SDP did not contain any supported media descriptions >>
        │
        │
        └── return false

  │
  └── return true


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------


SDPHandler::generateSDPOffer
──┬─────────────────────────
  │
  │
  ├── ----- if ----- !builder << NULL check >>
  │   ──┬────────────────────
  │     │
  │     │
  │     └── return false
  │
  │
  ├── ----- if ----- builder->getNeedReInvite
  │   ──┬────────────────────────────────────
        │
        │
        └── builder->generateSDPPacketFromNegotiation

  │
  ├── ----- else -----
  │   ──┬─────────────
        │
        │
        └── builder->generateSDPPacketFromLocalCap

  │
  ├── ----- if ----- ===== !m5t::CSdpPacket ===== << sdpPacket NULL check >>
  │   ──┬────────────────────────────────────────
        │
        │
        └── return false

  │
  ├── ===== m5t::CSdpPacket::Serialize =====
  │
  │
  └── return true


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------


SDPHandler::translateSDPOffer
──┬──────────────────────────
  │
  │
  ├── MX_ASSERT builder << NULL check, this code will core the device if there is no active SDPBuilder >>
  │
  │
  ├── ----- if ----- builder->updateRemoteSDPCap
  │   ──┬───────────────────────────────────────
        │
        │
        ├── ----- if ----- ===== builder->getLocalSdpCap().VerifyAnswer(builder->getRemoteSDPCap) ===== << m5t function to compare local and remote SDP capabilities >>
        │   ──┬──────────────────────────────────────────────────────────────────────────────────
              │
              │
              ├── ----- if ----- builder->getLocalSdpCap().GetNbStreams() > 1
              │   ──┬────────────────────────────────────────────────────────
                    │
                    │
                    └── ----- if ----- SDPHelper::verifySDPHasVoiceStream(builder->getLocalSdpCap)
                        ──┬───────────────────────────────────────────────────────────────────────
                          │
                          │
                          └── voiceStreamValid << Set value true, there were multiple media descriptions and we verified at least one carries voice >>

              │
              ├── ----- else -----
              │   ──┬─────────────
                    │
                    │
                    └── voiceStreamValid << Set value true, there was only a single media description and m5t verified it for us >>

              │
              └── ----- if ----- voiceStreamValid
                  ──┬────────────────────────────
                    │
                    │
                    ├── builder->updateAudioStreamRemoteInfo
                    │
                    │
                    ├── builder->updateAudioStreamWithNegrResult
                    │
                    │
                    ├── builder->retrieveRemoteOVRSids
                    │
                    │
                    ├── builder->retrieveRemoteEpidList
                    │
                    │
                    └── status << Set value true >>

        │
        ├── ----- else -----
        │   ──┬─────────────
              │
              │
              └── << log error that the SDP we received does not match the SDP we sent >>

  │
  ├── ----- else -----
  │   ──┬─────────────
        │
        │
        └── << log error that we were unable to process the remote SDP  >>

  │
  └── return << status >>




















  │     ├── ===== m5t::CSdpCapabilitiesMgr::reset ===== << remoteSdpCap >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::CopyCapsFromPacket ===== << remoteSdpCap >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStreamPtimeMs ===== << remoteSdpCap / All Media Descriptions >> [NOTE: CURRENTLY, NO CHECK FOR MISSING PTIME!!!]
  │     │
  │     │
  │     ├── SDPBuilder::validateMediaDescPtime
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / First Media Description / ccpl >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / First Media Description / remoteAVN >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / Second Media Description / remoteAVN >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / First Media Description / fid >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / Second Media Description / fid >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / First Media Description / Restrict >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / First Media Description / DigitCount >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / First Media Description / resetDigit >>
  │     │
  │     │
  │     ├── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / First Media Description / continousDialing >>
  │     │
  │     │
  │     └── ===== m5t::CSdpCapabilitiesMgr::GetStream::GetOtherAttribute ===== << remoteSdpCap / First Media Description / ptt_rep >>
  │
  │
  ├── ===== m5t::CSdpCapabilitiesMgr::VerifyAnswer ===== << localSdpCap >>
  │
  │
  ├── SDPHelper::verifySDPHasVoiceStream
  │
  │
  ├── builder->updateAudioStreamRemoteInfo <<<<< Virtual Function, Not Currently Overridden >>>>>
  │
  │
  ├── builder->updateAudioStreamWithNegrResult <<<<< Virtual Function, Overridden By AG / GG >>>>>
  │   ──┬─────────────────────────────────────
  │     │
  │     │   ┌───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
  │     │   │  The Overridden Functions In Both Derived Classes Call The Same Base Class Function Before Any Additional Processing  │
  │     │   └───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
  │     │
  │     ├── SDPBuilder::updateAudioStreamWithNegrResult
  │     │   ──┬────────────────────────────────────────
  │           │
  │           │
  │           └── SDPBuilder::updateAudioStrem
  │               ──┬─────────────────────────
  │                 │
  │                 │
  │                 ├── ===== m5t::CSdpLevelMedia::Serialize =====
  │                 │
  │                 │
  │                 ├── ===== m5t::CSdpLevelMedia::GetNbOtherAttributes =====
  │                 │
  │                 │
  │                 ├── ----- for ----- Number of other attribures
  │                 │   ──┬───────────────────────────────────────
  │                 │     │
  │                 │     │
  │                 │     ├── ----- if ----- << bssAttr >>
  │                 │     │   ──┬───────────
  │                 │     │     │
  │                 │     │     │
  │                 │     │     └── SDPHelper::getBSSenumFromString
  │                 │     │
  │                 │     │
  │                 │     └── ----- if ----- << txrxmodeAttr >>
  │                 │         ──┬───────────
  │                 │           │
  │                 │           │
  │                 │           └── SDPHelper::getTxRxMode
  │                 │
  │                 │
  │                 ├── ===== m5t::CSdpLevelMedia::GetMediaAnnouncement().GetNbMediaFormats =====
  │                 │
  │                 │
  │                 ├── ----- if ----- Number of media formats == 0
  │                 │   ──┬────────────────────────────────────────
  │                       │
  │                       │
  │                       └── return
  │
  │                 │
  │                 ├── ----- else -----
  │                 │   ──┬─────────────
  │                       │
  │                       │
  │                       └── ----- if ----- SDPHelper::annotateMediaFormatTypes
  │                           ──┬───────────────────────────────────────────────
  │                             │
  │                             │
  │                             └── ----- if ----- SDPHelper::analyzeMediaFormatTypes
  │                                 ──┬──────────────────────────────────────────────
  │                                   │
  │                                   │
  │                                   └── ----- if ----- One static codec and multiple dynamic codecs
  │                                       ──┬────────────────────────────────────────────────────────
  │                                         │
  │                                         │
  │                                         └── SDPBuilder::needReInvite << Set value false >>
  │
  │                 │
  │                 ├── ===== m5t::CSdpLevelMedia::GetPtime().GetPacketTime =====
  │                 │
  │                 │
  │                 ├── ----- if ----- SDPBuilder::validateMediaDescPtime
  │                 │   ──┬──────────────────────────────────────────────
  │                       │
  │                       │
  │                       ├── SDPHelper::getPtimeEnum
  │                       │
  │                       │
  │                       └── ----- if ----- SDPBuilder::needReInvite
  │                           ──┬────────────────────────────────────
  │                             │
  │                             │
  │                             └── SDPHelper::getPtimeEnum
  │
  │                 │
  │                 ├── ----- else -----
  │                 │   ──┬─────────────
  │                       │
  │                       │
  │                       ├── SDPHelper::getPtimeEnum
  │                       │
  │                       │
  │                       └── ----- if ----- SDPBuilder::needReInvite
  │                           ──┬────────────────────────────────────
  │                             │
  │                             │
  │                             └── SDPHelper::getPtimeEnum
  │
  │                 │
  │                 ├── SDPBuilder::determineCommunicationDomainForCodecs
  │                 │
  │                 │
  │                 ├── SDPHelper::getSupportedPayloads
  │                 │
  │                 │
  │                 ├── ----- if ----- Number of static payload types == 1
  │                 │   ──┬───────────────────────────────────────────────
  │                       │
  │                       │
  │                       └── ----- if ----- !SDPBuilder::needReInvite
  │                           ──┬─────────────────────────────────────
  │                             │
  │                             │
  │                             ├── ===== m5t::CSdpPacket::Parse =====
  │                             │
  │                             │
  │                             ├── ===== m5t::CSdpCapabilitiesMgr::Reset ===== << localSdpCap >>
  │                             │
  │                             │
  │                             └── ===== m5t::CSdpCapabilitiesMgr::CopyCapsFromPacket ===== << localSdpCap >>
  │
  │                 │
  │                 ├── ----- else -----
  │                 │   ──┬─────────────
  │                       │
  │                       │
  │                       ├─ SDPBuilder::needReInvite << Set value true >>
  │                       │
  │                       │
  │                       ├── ----- for ----- Number of received media formats (answerer)
  │                       │   ──┬────────────────────────────────────────────────────────
  │                       │     │
  │                       │     │
  │                       │     ├── ----- if ----- << foundCodec >>
  │                       │     │   ──┬───────────
  │                       │     │     │
  │                       │     │     │
  │                       │     │     └── break
  │                       │     │
  │                       │     │
  │                       │     ├── ----- if ----- AnnotatedPayloadType is static audio
  │                       │     │   ──┬────────────────────────────────────────────────
  │                       │     │     │
  │                       │     │     │
  │                       │     │     └── std::string << save payload type in receivedMedia >>
  │                       │     │
  │                       │     │
  │                       │     └── ----- if ----- !std::string.empty() << receivedMedia >>
  │                       │         ──┬────────────────────────────────
  │                       │           │
  │                       │           │
  │                       │           └── ----- for ----- Cycle through the local codecs
  │                       │               ──┬───────────────────────────────────────────
  │                       │                 │
  │                       │                 │
  │                       │                 ├── ----- if ----- << foundCodec >>
  │                       │                 │   ──┬───────────
  │                       │                 │     │
  │                       │                 │     │
  │                       │                 │     └── break
  │                       │                 │
  │                       │                 │
  │                       │                 ├── SDPHelper::getMediaFormatFromCodecInfo
  │                       │                 │
  │                       │                 │
  │                       │                 └── ----- if ----- !std::string.empty() << localMediaFOrmat >>
  │                       │                     ──┬────────────────────────────────
  │                       │                       │
  │                       │                       │
  │                       │                       └── ----- if ----- Local format matches the received format
  │                       │                           ──┬────────────────────────────────────────────────────
  │                       │                             │
  │                       │                             │
  │                       │                             └── << Set foundCodec value true, codec valid >>
  │                       │
  │                       │
  │                       └── ----- if ----- << !foundCodec >>
  │                           ──┬───────────
  │                             │
  │                             │
  │                             └── << codec invalid >>
  │
  │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐
  │   │  For AG, Additional Code Handled In Override SDPAGBuilder::updateAudioStreamWithNegrResult  │
  │   └─────────────────────────────────────────────────────────────────────────────────────────────┘
  │
  │     │
  │     └── SDPAGBuilder::updateAGAudioStream
  │         ──┬──────────────────────────────
  │           │
  │           │
  │           ├─
  │
  │
  │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐
  │   │  For GG, Additional Code Handled In Override SDPGGBuilder::updateAudioStreamWithNegrResult  │
  │   └─────────────────────────────────────────────────────────────────────────────────────────────┘
  │
  │     │
  │     └── SDPGGBuilder::updateTelephoneEventInfo
  │         ──┬───────────────────────────────────
  │           │
  │           │
  │           ├── SDPGGBuilder::isTelephoneEventEnabled
  │           │   ──┬───────────────────────────────────
  │           │     │
  │           │     │
  │           │     ├── ===== m5t::CSdpCapabilitiesMgr::GetNbStreams && ::IsStreamSupported ===== << localSdpCap / Second Media Description >>
  │           │     │
  │           │     │
  │           │     ├── ===== m5t::CSdpCapabilitiesMgr::GetNbStreams && ::IsStreamSupported ===== << remoteSdpCap / Second Media Description >>


  │
  │
  ├── builder->retrieveRemoteOVRSids <<<<< Virtual Function, Overridden By GG >>>>>
  │
  │
  └── builder->retrieveRemoteEpidList <<<<< Virtual Function, Overridden By GG >>>>>
  │
  │
  ├── pCallHandler->builder->getNeedReInvite
  │

  ----- if -----

  │
  └── pCallHandler->sendReInvite
      ──┬───────────────────────
        │
        │
        └── sdpHandler->generateSDPOffer
            ──┬─────────────────────────
              │
              │
              ├── builder->generateSDPPacketFromNegotiation
              │   ──┬──────────────────────────────────────
              │     │
              │     │
              │     ├── SDPHelper::createMediaAnnouncement
              │     │   ──┬───────────────────────────────
              │     │     │
              │     │
              │     │     ----- if -----
              │     │
              │     │     │
              │     │     └── ===== m5t::CSdpLevelMedia::SetMediaAnnouncement =====
              │     │
              │     │
              │     ├── SDPHelper::createRtpmapAttribute
              │     │   ──┬─────────────────────────────
              │     │     │
              │     │
              │     │     ----- if -----
              │     │
              │     │     │
              │     │     └── ===== m5t::CSdpLevelMedia::AddRtpmap =====
              │     │
              │     │
              │     ├── SDPHelper::createPtimeAttribute
              │     │   ──┬────────────────────────────
              │     │     │
              │     │
              │     │     ----- if -----
              │     │
              │     │     │
              │     │     └── ===== m5t::CSdpLevelMedia::SetPtime =====
              │     │
              │     │
              │     ├── SDPHelper::createOtherAttribute << maxptime >>
              │     │   ──┬────────────────────────────
              │     │     │
              │     │
              │     │     ----- if -----
              │     │
              │     │     │
              │     │     └── ===== m5t::CSdpLevelMedia::AddOtherAttribute =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpLevelMedia::SetSendRecv =====
              │     │
              │     │
              │     ├── SDPHelper::createProtocolVersion
              │     │   ──┬─────────────────────────────
              │     │     │
              │     │
              │     │     ----- if -----
              │     │
              │     │     │
              │     │     └── ===== m5t::CSdpLevelSession::SetProtocolVersion =====
              │     │
              │     │
              │     ├── SDPHelper::createOrigin
              │     │   ──┬────────────────────
              │     │     │
              │     │
              │     │     ----- if -----
              │     │
              │     │     │
              │     │     └── ===== m5t::CSdpLevelSession::SetOrigin =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldSessionName::SetSessionName =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldSessionName::Validate =====
              │     │   ──┬────────────────────────────────────────────
              │     │     │
              │     │
              │     │     ----- if -----
              │     │
              │     │     │
              │     │     └── ===== m5t::CSdpLevelSession::SetSessionName =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldConnectionData::SetNetworkTypeId =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldConnectionData::SetAddressTypeId =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldConnectionData::SetNetworkTypeString =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldConnectionData::SetAddressTypeString =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldConnectionData::SetAddress =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldConnectionData::Validate =====
              │     │   ──┬───────────────────────────────────────────────
              │     │     │
              │     │
              │     │     ----- if -----
              │     │
              │     │     │
              │     │     └── ===== m5t::CSdpLevelSession::SetConnectionData =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldTime::SetStartTime =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpFieldTime::SetStopTime =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpLevelSession::AddTime =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpLevelSession::SetSendRecv =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpLevelSession::AddMedia =====
              │     │
              │     │
              │     ├── ===== m5t::CSdpPacket::SetSession =====
              │     │
              │     │
              │     └── ===== m5t::CSdpCapabilitiesMgr::CopyCapsFromPacket =====
              │
              │
              └── ===== m5t::CSdpPacket::Serialize =====










╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                                                                                                                         ║
║                                                    Code Path To Create SDP For Invite Request - UAS (Inbound Call)                                                      ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                                                                         ║
║   Reference                                                                                                                                                             ║
║   ─────────                                                                                                                                                             ║
║      https://www.ietf.org/proceedings/51/I-D/draft-ietf-sip-call-flows-05.txt                                                                                           ║
║                                                                                                                                                                         ║
║                                                                                                                                                                         ║
║                        Sequence Diagram (all messages shown as coming from device, not proxy)                                                                           ║
║                     ────────────────────────────────────────────────────────────────────────────                                                                        ║
║                                                                                                                                                                         ║
║    Remote Device                                   This Codebase                                                                                                        ║
║                                                                                                                                                                         ║
║         UAC                                             UAS                                                                                                             ║
║         ─┬─                                             ─┬─                                                                                                             ║
║          │                                               │          UAC Sends INVITE Request                    Function That Handles Request / Initiates Response      ║
║          │                                               │          ────────────────────────                    ──────────────────────────────────────────────────      ║
║          │  [CSeq 1]  INVITE Request (w SDP Body)        │                                                         IncomingCallState::EvInvited                         ║
║       F1 ├──────────────────────────────────────────────>│ G1                                                         SDPHandler::generateSDPAnswer                     ║
║          │ voice media format(s): 0 8 15 18 (can be all) │                                                                                                              ║
║          │                       ptime: xx               │                                                                                                              ║
║          │                                               │                                                                                                              ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   Provisional Responses to INVITE Request     Function That Handles Request / Initiates Response      ║
║   │      │                                               │      │   ───────────────────────────────────────     ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]       100 Response                  │      │      100 - Optional Response Message To          APPi_GGProc_DAIDAAudioSession::startRinging*         ║
║   │ F2-1 │<──────────────────────────────────────────────┤ G2-1 │            Indicate The Call Is Trying              ATCoIP_API::SL_ATCoIP_provisionCall               ║
║   │      │                                               │      │                                                        CallManager::sendProvisionalMessage            ║
║   │      │                                               │      │      180 - Optional Response Message To                   --- Message Queue ---                       ║
║   │      │                                               │      │            Indicate The Call Is Ringing                      CallHandler::sendProvisional             ║
║   │      │  [CSeq 1]       18x Response                  │      │                                                                 IncomingCallState::sendProvisional    ║
║   │ F2-2 │<──────────────────────────────────────────────┤ G2-2 │      183 - Optional Response Message To                                                               ║
║   │      │                                               │      │            Indicate Additional Information       * One possible code-flow example (there are many)    ║
║   │      │   (Only One Path Is Taken, Either F3 or X1)   │      │                                                                                                       ║
║   └──────┼───────────────────────────────────────────────┼──────┘                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   UAC Ends the Call With a CANCEL Request     Function That Handles Request / Initiates Response      ║
║   │      │                                               │      │   ───────────────────────────────────────     ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]      CANCEL Request                 │      │                                                  IncomingCallState::EvInviteCancelled                 ║
║   │   X1 ├──────────────────────────────────────────────>│ Y1   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       200 Response                  │      │                                                                                                       ║
║   │   X2 │<──────────────────────────────────────────────┤ Y2   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       487 Response                  │      │                                                                                                       ║
║   │   X3 │<──────────────────────────────────────────────┤ Y1   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │   X4 ├──────────────────────────────────────────────>│ Y2   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │               (Call Ends Here)                │      │                                                                                                       ║
║   ╘══════╪═══════════════════════════════════════════════╪══════╛                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   Responses to INVITE Request                 Function That Handles Request / Initiates Response      ║
║   │      │                                               │      │   ───────────────────────────                 ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1] 200 Response (w SDP Body)           │      │      200 - Response Message To Indicate          APPi_GGProc_DAIDAAudioSession::incoming**8           ║
║   │ F3-1 │<──────────────────────────────────────────────┤ G3-1 │            Request Was Successful (OK)*             ATCoIP::SL_ATCoIP_answerCall                      ║
║   │      │ voice media format(s): 0 8 15 18 (can be all) │      │                                                        CallManager::answerCall                        ║
║   │      │                       ptime: xx               │      │      3xx - Optional Response Message To                   --- Message Queue ---                       ║
║   │      │                                               │      │            Indicate Redirection Of The Call                  CallHandler::answer                      ║
║   │      │                                               │      │                                                                 IncomingCallState::answer             ║
║   │      │  [CSeq 1]       3xx Response                  │      │      4xx - Optional Response Message To                            SDPHandler::generateSDPAnswer      ║
║   │ F3-2 │<──────────────────────────────────────────────┤ G3-2 │            Indicate Client Failure (UAC)                              SDPBuilder::generateAnswer      ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │      5xx - Optional Response Message To          *** One possible code-flow example (there are many)  ║
║   │      │                                               │      │            Indicate Server Failure (UAS)                                                              ║
║   │      │  [CSeq 1]       4xx Response                  │      │                                                                                                       ║
║   │ F3-3 │<──────────────────────────────────────────────┤ G3-3 │      6xx - Optional Response Message To                                                               ║
║   │      │                                               │      │            Indicate Global Failure                                                                    ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       5xx Response                  │      │      *  If 2xx response is received, MUST send the ACK request                                        ║
║   │ F3-4 │<──────────────────────────────────────────────┤ G3-4 │                                                                                                       ║
║   │      │                                               │      │      ** Establishment and direction of RTP media depends on SDP parameters matching                   ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       6xx Response                  │      │                                                                                                       ║
║   │ F3-5 │<──────────────────────────────────────────────┤ G3-5 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │   F4 ├──────────────────────────────────────────────>│ G4   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  (Bi-)Directional RTP (MAY Be) Established**  │      │                                                                                                       ║
║   │      │<=============================================>│      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │   (Only One Path Is Taken, Either R1 or F5)   │      │                                                                                                       ║
║   └──────┼───────────────────────────────────────────────┼──────┘                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   UAC Sends Re-INVITE Request                 Function That Handles Request / Initiates Response      ║
║   │      │                                               │      │   ───────────────────────────                 ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]  INVITE Request (w SDP Body)        │      │                                                  EstablishedCallState::EvReInvited                    ║
║   │   R1 ├──────────────────────────────────────────────>│ S1   │                                                     SDPHandler::generateSDPAnswer                     ║
║   │      │  voice media format(s): 0 8 15 18 (only one)  │      │                                                     --- or ---                                        ║
║   │      │                       ptime: xx               │      │                                                     CallHandler::generateAnswerForReInvite            ║
║   │      │                                               │      │   Responses to INVITE Request                          SDPHandler::generateSDPAnswer                  ║
║   │      │                                               │      │   ───────────────────────────                                                                         ║
║   │      │  [CSeq 1] 200 Response (w SDP Body)           │      │      200 - Response Message To Indicate                                                               ║
║   │ R2-1 │<──────────────────────────────────────────────┤ S2-1 │            Request Was Successful (OK)*                                                               ║
║   │      │  voice media format(s): 0 8 15 18 (only one)  │      │                                                                                                       ║
║   │      │                       ptime: xx               │      │      4xx - Optional Response Message To                                                               ║
║   │      │                                               │      │            Indicate Client Failure (UAC)                                                              ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       4xx Response                  │      │                                                                                                       ║
║   │ R2-2 │<──────────────────────────────────────────────┤ S2-2 │      *  If 2xx response is received, MUST send the ACK request                                        ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │      ** Establishment and direction of RTP media depends on SDP parameters matching                   ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │   R3 ├──────────────────────────────────────────────>│ S3   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  (Bi-)Directional RTP (MAY Be) Established**  │      │                                                                                                       ║
║   │      │<=============================================>│      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   └──────┼───────────────────────────────────────────────┼──────┘                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   UAC Ends the Call With a BYE Request        Function That Handles Request / Initiates Response      ║
║   │      │                                               │      │   ────────────────────────────────────        ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]        BYE Request                  │      │                                                                                                       ║
║   │   F5 ├──────────────────────────────────────────────>│ G5   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       200 Response                  │      │                                                                                                       ║
║   │ F6-1 │<──────────────────────────────────────────────┤ G6-1 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       4xx Response                  │      │                                                                                                       ║
║   │ F6-2 │<──────────────────────────────────────────────┤ G6-2 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │ F6-3 ├──────────────────────────────────────────────>│ G6-3 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │               (Call Ends Here)                │      │                                                                                                       ║
║   ╘══════╪═══════════════════════════════════════════════╪══════╛                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   Override Call Types, UAC Sends INFO Request Function That Handles Request / Initiates Response      ║
║   │      │                                               │      │   ─────────────────────────────────────────── ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]       INFO Request                  │      │                                                                                                       ║
║   │   I1 ├──────────────────────────────────────────────>│ J1   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       200 Response                  │      │                                                                                                       ║
║   │ I2-1 │<──────────────────────────────────────────────┤ J2-1 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       4xx Response                  │      │                                                                                                       ║
║   │ I2-2 │<──────────────────────────────────────────────┤ J2-2 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]        ACK Request                  │      │                                                                                                       ║
║   │ I3-3 ├──────────────────────────────────────────────>│ J2-3 │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   ╘══════╪═══════════════════════════════════════════════╪══════╛                                                                                                       ║
║   ┌──────┼───────────────────────────────────────────────┼──────┐   UAS Ends the Call With a BYE Request        Function That Handles Request / Initiates Response      ║
║   │      │                                               │      │   ────────────────────────────────────        ──────────────────────────────────────────────────      ║
║   │      │  [CSeq 1]        BYE Request                  │      │                                                                                                       ║
║   │   F7 │<──────────────────────────────────────────────┤ G7   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │  [CSeq 1]       200 Response                  │      │                                                                                                       ║
║   │   F8 ├──────────────────────────────────────────────>│ G8   │                                                                                                       ║
║   │      │                                               │      │                                                                                                       ║
║   │      │               (Call Ends Here)                │      │                                                                                                       ║
║   ╘══════╪═══════════════════════════════════════════════╪══════╛                                                                                                       ║
║          │                                               │                                                                                                              ║
║                                                                                                                                                                         ║
║                                                                                                                                                                         ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝









