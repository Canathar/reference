╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║ Eclipse_Project_Setup.txt                                                                                                                                               ║
║                                                                                                                                                                         ║
║    Document Best Viewed/Printed: Page{Ledger, Landscape, 0.25in Side Margins}   Font{Monospace Font, Normal, 10pt}                                                      ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                            Revision History                                                                             ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║ VV.vv.DOYyy.bb (dd MMM yy) - Initial Creation/Development Update/Maintenance Update                                                                                     ║
║                                                                                                                                                                         ║
║  1.00.12316.xx (02 May 16) - Initial Creation {J. Laccone}                                                                                                              ║
║                                 Added header, added reference data                                                                                                      ║
║  1.01.12716.xx (06 May 16) - Development Update {J. Laccone}                                                                                                            ║
║                                 Added clarification to several steps                                                                                                    ║
║  1.02.15416.xx (02 Jun 16) - Development Update {J. Laccone}                                                                                                            ║
║                                 Added info for new Klocwork version                                                                                                     ║
║  1.03.22816.xx (15 Aug 16) - Development Update {J. Laccone}                                                                                                            ║
║                                 Added info for drive mapper builder                                                                                                     ║
║  1.04.25616.xx (12 Sep 16) - Development Update {J. Laccone}                                                                                                            ║
║                                 Step cleanup                                                                                                                            ║
║  1.05.29616.xx (22 Oct 16) - Development Update {J. Laccone}                                                                                                            ║
║                                 Modified environment variables                                                                                                          ║
║  1.06.33416.xx (29 Nov 16) - Development Update {J. Laccone}                                                                                                            ║
║                                 Added Eclipse Plugin Fixes                                                                                                              ║
║  1.07.34416.01 (29 Nov 16) - Fixed typo on Build Spec file Step {C. Gregoire}                                                                                           ║
║                                 --J should be -J ( For What would Jenkins do)                                                                                           ║
║  1.08.04417.xx (13 Feb 17) - Development Update {J. Laccone}                                                                                                            ║
║                                 Updated to support new, larger pull script                                                                                              ║
║  1.09.12917.xx (09 May 17) - Development Update {J. Laccone}                                                                                                            ║
║                                 Updated with instructions on creating pruned branch                                                                                     ║
║  1.10.15217.xx (01 Jun 17) - Development Update {J. Laccone}                                                                                                            ║
║                                 Updated with example branches for prune script                                                                                          ║
║  1.11.15917.xx (08 Jun 17) - Development Update {J. Laccone}                                                                                                            ║
║                                 Added instructions to install Eclipse                                                                                                   ║
║  1.12.35517.xx (21 Dec 17) - Development Update {J. Laccone}                                                                                                            ║
║                                 Added instructions for workspace creation with tags                                                                                     ║
║  1.13.08118.xx (22 Mar 18) - Development Update {J. Laccone}                                                                                                            ║
║                                 Modified instructions to explicitly call out Subversion (preparing for git)                                                             ║
║                                 Added instructions for branches with VectorCAST                                                                                         ║
║  1.14.12318.xx (03 May 18) - Development Update {J. Laccone}                                                                                                            ║
║                                 Modified instructions to use new Subversion server                                                                                      ║
║  1.15.12818.xx (08 May 18) - Development Update {J. Laccone}                                                                                                            ║
║                                 Clarifications after CM discussion                                                                                                      ║
║  1.16.15118.xx (31 May 18) - Development Update {J. Laccone}                                                                                                            ║
║                                 Added additional environment variables                                                                                                  ║
║                                                                                                                                                                         ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                Reference                                                                                ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                                                                         ║
║   Subversion 1.7.x ION Repository                                                                                                                                       ║
║   -------------------------------                                                                                                                                       ║
║      https://lnsvr0011.cs.myharris.net/repositories/ion/                                                                                                                ║
║                                                                                                                                                                         ║
║   Subversion 1.9.x VCS21 Source Repository                                                                                                                              ║
║   ----------------------------------------                                                                                                                              ║
║      https://lnsvr0016.cs.myharris.net/vcs21/vcs21_src/                                                                                                                 ║
║                                                                                                                                                                         ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                       Creating A Local Source Code Working Directory: Subversion                                                        ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

   Obtain The Scripts To Create A Repository Workspace/Local Workspace
   ───────────────────────────────────────────────────────────────────
      1. Open a terminal window as a non-root user
      2. Create a local source code repository base directory by typing the following command(s) into the terminal window:

            mkdir <src-repo-base-directory>
            (ex: mkdir /data/dataworkspace)

      3. Change to your local source code repository base directory by typing the following command(s) into the terminal window:

            cd <src-repo-base-directory>
            (ex: cd /data/dataworkspace)

​	    4. Obtain the repository workspace installation script by typing the following command(s) into the terminal window:

           svn export <repo-url/script-name> <script-name>
           (ex: svn export https://lnsvr0016.cs.myharris.net/vcs21/vcs21_src/vcs21/irad/trunk/Embedded/svn_mkbranch svn_mkbranch)

​	    5. Obtain the local workspace installation script by typing the following command(s) into the terminal window:

           svn export <repo-url/script-name> <script-name>
           (ex: svn export https://lnsvr0016.cs.myharris.net/vcs21/vcs21_src/vcs21/irad/trunk/Embedded/svn_make_vcs21_workspace svn_make_vcs21_workspace)


   OPTIONAL: Create A New Repository Workspace (Branch)
   ────────────────────────────────────────────────────
      1. Open a terminal window as a non-root user
      2. Change to your local source code repository base directory by typing the following command(s) into the terminal window:

            cd <src-repo-base-directory>
            (ex: cd /data/dataworkspace)

      3. Execute the following commands in the terminal window to create a new repository workspace (branch - A.K.A. shallow copy) of the trunk:

            ./svn_mkbranch -t <name-for-the-new-branch> -f <src-branch-in-repo>
            (ex: ./svn_mkbranch -t DE12345 -f trunk)
            (see svn_mkbranch --help for more information)


   Create A New Local Source Code Workspace (Working Copy Of Source Code)
   ──────────────────────────────────────────────────────────────────────
      1. Open a terminal window as a non-root user
      2. Change to your local source code repository base directory by typing the following command(s) into the terminal window:

            cd <src-repo-base-directory>
            (ex: cd /data/dataworkspace)

      3. Execute the following commands in the terminal window to create a new local workspace:

            ./svn_make_vcs21_workspace --profile <checkout-type> --workspace <name-for-the-new-local-src-directory> --onbranch <src-branch-in-repo>
            (ex: ./svn_make_vcs21_workspace --profile appdev --workspace /data/dataworkspace/trunk --onbranch /trunk)
            (see svn_make_vcs21_workspace --help for more information)



╔═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                   Adding A Local Source Code Working Directory To Eclipse: Subversion                                                   ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

   FIRST TIME ONLY: Create A Drive Mapper Bash Script
   ══════════════════════════════════════════════════
      1. Open a terminal window as a non-root user
      2. Change to your home directory by typing the following command(s) into the terminal window:

            cd ~

      3. Create the drive mapper bash script by typing the following command(s) into the terminal window:

            touch drive_map.sh

      4. Make the drive mapper bash script executable by typing the following command(s) into the terminal window:

            chmod 775 drive_map.sh

      5. Open the drive mapper bash script in a text editor by typing the following command(s) into the terminal window:

            gedit drive_map.sh &

      6. Add the following lines to the drive_map.sh file

            #!/bin/bash

            rm -rf ~/vdriveDEV
            ln -s ${1} ~/vdriveDEV

      7. Save the file and exit gedit


   Create A Klocwork Build Specification File (Requires That ALL Compilers & Code Tools Are Installed)
   ═══════════════════════════════════════════════════════════════════════════════════════════════════
      1. Open a terminal window as a non-root user
      2. Change to the embedded root directory of your local source code workspace directory by typing the following command(s) into the terminal window:

            cd <name-for-the-new-local-src-directory>/ccu/base
            (ex: cd /data/dataworkspace/trunk/ccu/base)

      3. Run the drive mapper bash script to create symbolic links for the current local source code workspace directory by typing the following command(s)
         into the terminal window:

            ~/drive_map.sh `pwd`

      4. Change to the embedded build directory of your local source code workspace directory by typing the following command(s) into the terminal window:

            cd build/core

      5. Build the source code and the Klocwork build specification file by typing the following command(s) into the terminal window:

            kwinject ./xbuild.sh -p -t map -t pui -t tmg -t rmg -t riu

      6. Verify that all components show a "PASS" status


   Import An Existing Project Created From A Local VCS21 Workspace
   ═══════════════════════════════════════════════════════════════
      1. In Eclipse, right click in a blank aream of the "Project Explorer" TreeView, select the "Import..." menu item
      2. Select C/C++ -> Existing Code as Makefile Project, click the "Next >" button
      3. Click the "Browse..." button, select a local workspace directory, click the "OK" button
      4. Select Toolchain for Indexer Settings -> Linux GCC
      5. Click the "Finish" button


   Modify Project Settings
   ═══════════════════════
      NOTE: <PROJECT_NAME> is the name you the developer want to call your local working copy of the source code. Most often, the name reflects the user story or
            defect that you are working on at the time. It could also be a copy of the trunk for reference. Some examples are US12476, DE22387, trunk

      1. In the "Project Explorer" TreeView of Eclipse, right click on a project (referred to as <PROJECT_NAME> below), select the "Properties" menu item

      Builders
      ────────
         1. In the "Properties for <PROJECT_NAME>" window, select the "Builders" TreeView item
         2. Click the "New..." button
         3. In the "Choose configuration type" window, select the "Program" item, click the "OK" button
         4. In the "Edit Configuration" window, perform the following:

               a. Type a name for the builder in the "Name" textbox

                     DriveMapper_<PROJECT_NAME>
                     (ex: DriveMapper_trunk)

               b. Type the following in the "Location" textbox

                     ${env_var:HOME}/drive_map.sh

               c. Click the "Variables..." button that is underneath the "Arguments" group area
               d. Select "build_project", click the "OK" button
               e. In the "Arguments" group area, modify the entry to the following:

                     ${build_project}/ccu/base

               f. Click the "OK" button

         5. In the "Properties for <PROJECT_NAME>" window, select the "DriveMapper_<PROJECT_NAME>" item
         6. Click the "UP" button until the selected builder is first item in the list


      C/C++ Build
      ───────────
         1. In the "Properties for <PROJECT_NAME>" window, select the "C/C++ Build" TreeView item
         2. Click the "Builder Settings" tab (should already be the active tab)
         3. Uncheck the "Use default build command" checkbox
         4. Enter the following into the "Build command" textbox

               (For Systems With Klocwork)
               ${KW_DIR}/bin/kwinject -o ${ProjDirPath}/ccu/base/build/core/kwinject.out ./xbuild.sh -p

               (For Systems Without Klocwork)
               ./xbuild.sh -p

****** make -j 12

         5. Uncheck the "Generate Makefiles automatically" checkbox
         6. Enter the following into the "Build directory" textbox

               ${ProjDirPath}/ccu/base/build/core

****** ${ProjDirPath}/ccu/_build/app

         7. Click the "Behavior" tab
         8. Enter the following into the "Build (Incremental build)" textbox

               -t map -t pui -t tmg -t rmg -t riu

****** install/strip

         9. Enter the following into the "Clean" textbox

               --clean

****** clean

        10. Click the "Apply" button


         OPTIONAL: Build Configurations (Perform These Steps AFTER The C/C++ Build Steps Above)
         --------------------------------------------------------------------------------------
            1. In the "Properties for <PROJECT_NAME>" window, click the "Manage Configurations..." button
            2. In the "<PROJECT_NAME>: Manage Configurations" window, click the "New..." button
            3. In the "Create New Configuration" window, enter the following into the "Name" textbox

               <product-name>
               (ex: MAP, or RIU, or RMG, or TMG)

            4. In the "Create New Configuration" window, enter the following into the "Description" textbox

               Build the xxx Only
               (ex: Build the TMG Only)

            5. In the "Create New Configuration" window, verify that the "Existing configuration" radio button is clicked
            6. In the "Create New Configuration" window, verify that the "Existing configuration" dropdown combobox is set to "Default"
            7. In the "Create New Configuration" window, click the "OK" button
            8. In the "<PROJECT_NAME>: Manage Configurations" window, select the configuration created above
            9. In the "<PROJECT_NAME>: Manage Configurations" window, clcik the "Set Active" button
           10. In the "<PROJECT_NAME>: Manage Configurations" window, clcik the "OK" button
           11. In the "Properties for <PROJECT_NAME>" window, select the configuration created above from the "Configurations" dropdown combobox
           12. In the "Properties for <PROJECT_NAME>" window, click the "Apply" button
           13. In the "Properties for <PROJECT_NAME>" window, click the "Behavior" tab
           14. Enter the following into the "Build (Incremental build)" textbox

                  -t <product-name>
                  (ex: -t map)

           15. Click the "Apply" button


      C/C++ General
      ─────────────
         1. In the "Properties for <PROJECT_NAME>" window, expand the "C/C++ General" TreeView item

         Paths and Symbols
         -----------------
            1. Underneath the "C/C++ General" TreeView item, select the "Paths and Symbols" TreeView item
            2. Click the "Source Location" tab
            3. Click the "Edit Filter..." button
            4. In the "Source Folder Exclusion Patterns" window, click the "Add..." button
            5. In the "Add Exclusion Pattern" window, click the "Browse..." button
            6. In the "Exclusion Pattern Selection" window, navigate and select the following folder:

                  ccu/base/tools/vcast

            7. In the "Exclusion Pattern Selection" window, click the "OK" button
            8. In the "Add Exclusion Pattern" window, click the "OK" button
            9. In the "Source Folder Exclusion Patterns" window, click the "OK" button

         Preprocessor Include Paths, Macros etc.
         ---------------------------------------
            1. Underneath the "C/C++ General" TreeView item, select the "Preprocessor Include Paths, Macros etc." TreeView item
            2. Click the "Entries" tab (should already be the active tab)
            3. In the "Languages" list box, select "GNU C++"
            4. In the "Setting Entries" list box, select "CDT User Setting Entries"
            5. Click the "Add..." button
            6. In the window, select "Preprocessor Macro" from the dropdown combo box
            7. Enter the following into the "Name" textbox

               __SOLACOM_FILE__

            8. Enter the following into the "Value" textbox

               0

            9. Click the "OK" button

         2. Click the "Apply" button


      Klocwork
      ────────
         1. In the "Properties for <PROJECT_NAME>" window, expand the "Klocwork" TreeView item
         2. Check the "Enable project specific settings" checkbox
         3. Click the "Synchronization" tab
         4. Enter the following into the "Host" textbox

               192.168.155.162

         5. Enter the following into the "Port" textbox

               8080

         6. Click the "Refresh" button (you may be prompted to add your Klocwork server credentials)
         7. Select your project from the "Project name" dropdown combo box (usually "VCS21_EMB")

         Klocwork Build Settings
         -----------------------
            1. Underneath the "Klocwork" TreeView item, select the "Klocwork Build Settings" TreeView item
            2. Click the "Use build specification file" radio button
            3. Click the "Browse..." button

            6. In the "Select build specification file" window, navigate and select the Klocwork build specification file

                  <WORKSPACE_DIR>/<PROJECT_NAME>/ccu/base/build/core/kwinject.out
                  (ex: /data/dataworkspace/trunk/ccu/base/build/core/kwinject.out)

            7. In the "Select build specification file" window, click the "OK" button

      2. In the "Properties for <PROJECT_NAME>" window, click the "Apply and Close" button


   Build The Project
   ═════════════════
      1. In the "Project Explorer" TreeView of Eclipse, select a project (referred to as <PROJECT_NAME> below)
      2. Launch the build process by performing one of the following:

            Click the "Build" button from the button bar

                       -- or --

            Right click on <PROJECT_NAME>, select the "Build Project" menu item

      3. Verify that all components show a "PASS" status
